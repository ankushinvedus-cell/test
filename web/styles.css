:root {
  color-scheme: dark;
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  --bg: #0b0d12;
  --panel: #11151c;
  --panel-soft: #161b23;
  --text: #e8edf7;
  --muted: #8c96aa;
  --line: #242c3a;
  --brand: #7a8fff;
  --brand-dark: #667bf2;
}

* { box-sizing: border-box; }
body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
}

.app-shell {
  max-width: 1320px;
  margin: 0 auto;
  padding: 1rem;
}

.topbar {
  background: var(--panel);
  border: 1px solid var(--line);
  border-radius: 14px;
  padding: 1rem 1.1rem;
  display: flex;
  justify-content: space-between;
  gap: .8rem;
}
.topbar h1 { margin: 0; font-size: 1.2rem; font-weight: 700; }
.topbar p { margin: .3rem 0 0; color: var(--muted); font-size: .9rem; }
.stats { display: flex; gap: .45rem; flex-wrap: wrap; }
.stat-pill {
  background: var(--panel-soft);
  border: 1px solid var(--line);
  border-radius: 999px;
  color: #c7d0e5;
  font-size: .78rem;
  padding: .25rem .55rem;
}

.panel {
  background: var(--panel);
  border: 1px solid var(--line);
  border-radius: 14px;
}

.sync-panel { margin-top: 1rem; padding: .85rem; }
.sync-head { display: flex; justify-content: space-between; align-items: center; gap: .45rem; margin-bottom: .55rem; }
.sync-head h3 { margin: 0; font-size: .98rem; }
.sync-head span { color: var(--muted); font-size: .8rem; }
.sync-grid { display: grid; grid-template-columns: 1fr 1fr; gap: .65rem; }
.sync-textarea {
  width: 100%;
  margin-top: .4rem;
  min-height: 86px;
  resize: vertical;
  border: 1px solid var(--line);
  border-radius: 10px;
  background: #0d1118;
  color: var(--text);
  padding: .55rem .66rem;
}

.layout { display: grid; grid-template-columns: 330px 1fr; gap: 1rem; margin-top: 1rem; }
.library-panel { padding: .9rem; display: flex; flex-direction: column; min-height: calc(100vh - 286px); }
.reader-panel { padding: .9rem; min-height: calc(100vh - 286px); }

.library-head { display: flex; justify-content: space-between; align-items: center; margin-bottom: .65rem; }
.library-head h2 { margin: 0; font-size: .98rem; }
.upload-btn {
  display: inline-block;
  padding: .4rem .68rem;
  border-radius: 9px;
  background: var(--brand);
  color: #0e1320;
  font-weight: 700;
  font-size: .82rem;
  cursor: pointer;
}
.upload-btn:hover { background: var(--brand-dark); }
#bookInput { display: none; }

.search-input {
  width: 100%;
  border: 1px solid var(--line);
  border-radius: 10px;
  padding: .56rem .68rem;
  outline: none;
  margin-bottom: .68rem;
  background: #0d1118;
  color: var(--text);
}
.search-input:focus, .sync-textarea:focus {
  border-color: #3b4b72;
}

.library-list { list-style: none; margin: 0; padding: 0; display: grid; gap: .5rem; overflow: auto; }
.library-item { border: 1px solid var(--line); border-radius: 11px; padding: .62rem; background: #0f141c; }
.library-item.active { border-color: #3f548d; background: #111827; }
.book-row { display: flex; justify-content: space-between; align-items: center; gap: .4rem; }
.library-item h3 { margin: 0; font-size: .9rem; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.format-chip { border-radius: 999px; padding: .18rem .43rem; font-size: .67rem; font-weight: 700; border: 1px solid var(--line); }
.format-chip.pdf { background: #22131a; color: #f0a4b7; }
.format-chip.epub { background: #132018; color: #95d6a5; }
.library-meta { margin: .36rem 0 .56rem; color: var(--muted); font-size: .8rem; }
.library-empty { border: 1px dashed var(--line); border-radius: 11px; color: var(--muted); text-align: center; padding: .95rem; }
.library-actions { display: flex; gap: .45rem; }

button {
  border: 1px solid transparent;
  border-radius: 9px;
  padding: .38rem .66rem;
  cursor: pointer;
  font-weight: 650;
}
.btn-primary { background: var(--brand); color: #0f1524; }
.btn-primary:hover { background: var(--brand-dark); }
.btn-ghost { background: #1b2330; color: #dbe4f8; border-color: #2b364a; }
.btn-ghost:hover { background: #222d3e; }

.reader-shell { height: 100%; display: flex; flex-direction: column; }
.reader-toolbar {
  display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; gap: .65rem;
  border: 1px solid var(--line); border-radius: 11px; background: var(--panel-soft); padding: .58rem .66rem; margin-bottom: .65rem;
}
.reader-title-group { display: grid; gap: .15rem; }
.reader-title-group strong { font-size: .95rem; }
.reader-title-group span { color: var(--muted); font-size: .77rem; max-width: 470px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.controls { display: flex; gap: .48rem; align-items: center; }
.page-indicator { padding: .35rem .56rem; border-radius: 999px; background: #0d1118; border: 1px solid var(--line); font-size: .8rem; }

.pdf-reader, .epub-reader {
  flex: 1;
  min-height: 70vh;
  border-radius: 11px;
  border: 1px solid var(--line);
  overflow: auto;
  background: #0b1017;
  display: grid;
  place-items: center;
}
canvas { max-width: 100%; height: auto; }

.empty-state { height: 100%; min-height: 70vh; display: grid; place-items: center; }
.empty-card {
  border: 1px dashed var(--line);
  border-radius: 12px;
  padding: 1.15rem;
  text-align: center;
  background: #0f141c;
  max-width: 520px;
}
.empty-card h2 { margin: 0 0 .4rem; font-size: 1.08rem; }
.empty-card p { margin: 0; color: var(--muted); }

.toast {
  position: fixed;
  right: 20px;
  bottom: 20px;
  background: #1a2332;
  border: 1px solid #2d3a54;
  color: #eaf0ff;
  border-radius: 9px;
  padding: .52rem .72rem;
  z-index: 10;
}

@media (max-width: 980px) {
  .sync-grid, .layout { grid-template-columns: 1fr; }
  .library-panel, .reader-panel { min-height: auto; }
  .sync-head { flex-direction: column; align-items: flex-start; }
}
